# 微信小程序 AP 配网安信可 Wi-Fi 模块示例

## 一 材料准备

- 设备：已烧录出厂 **AT 固件**的安信可 ESP-12S，ESP32-S和ESP-12K模组；

- 微信小程序：自行具备微信小程序开发能力基础；

# 二 实现目的

通过微信小程序配置未入网的安信可Wi-Fi模组连接家庭2.4G路由器，实现连接云端服务器；

# 三 配置的数据交互协议

## 3.1 小程序发送网络信息阶段

- 微信小程序发送配置网络的信息：

```c++
{ 
  "port":61691 , //微信小程序本地端口
  "password":"12345678" , //要连接的家庭网络路由器的密码
  "ssid":"xuhong@aithinker" //要连接的家庭网络路由器的SSID
}
```

- 模组返回以下信息，以表示成功收到配置网络的信息：

```c++
{ 
  "result": 0 ,  //错误码
}
```

## 3.2 模组连接路由器的回调：

- 模组返回以下信息格式：

```c++
{ 
  "code": 1 , // 错误码
}
```

| 错误码 | 含义                                    |
| ------ | --------------------------------------- |
| 0      | 设备成功收到信息                        |
| 1      | 设备成功解析到小程序发来的SSID和PWD信息 |
| 2      | 设备成功连接到路由器                    |
| 3      | 设备失败连接到路由器                    |

# 四 配置原理和过程

![AP_Resource](.\png\AP_Resource.png)